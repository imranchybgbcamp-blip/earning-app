<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Global Earning BD - Verified App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <script src='//libtl.com/sdk.js' data-zone='10506581' data-sdk='show_10506581'></script>
    <style>
        :root { --primary: #4285F4; --bg: #0f172a; --card: #1e293b; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; text-align: center; }
        
        /* Login Screen Styles */
        #login-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); z-index: 9999; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .google-btn { background: white; color: #444; padding: 12px 25px; border-radius: 5px; font-weight: bold; cursor: pointer; display: flex; align-items: center; border: none; gap: 10px; font-size: 1rem; }
        
        .main-app { display: none; padding-bottom: 80px; }
        .header { background: var(--card); padding: 20px; border-bottom: 3px solid var(--primary); display: flex; align-items: center; gap: 15px; }
        .u-img { width: 50px; height: 50px; border-radius: 50%; border: 2px solid var(--primary); }
        .card { background: var(--card); margin: 15px; padding: 20px; border-radius: 12px; border: 1px solid #334155; }
        .balance { font-size: 2.5rem; font-weight: bold; color: var(--primary); margin: 10px 0; }
        .btn-action { background: var(--primary); color: white; width: 90%; padding: 15px; border: none; border-radius: 8px; font-weight: bold; font-size: 1.1rem; cursor: pointer; }
        .input-box { width: 90%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid #334155; background: #0f172a; color: white; }
    </style>
</head>
<body>

    <div id="login-screen">
        <i class="fas fa-shield-halved" style="font-size: 4rem; color: var(--primary); margin-bottom: 20px;"></i>
        <h2>Welcome Back</h2>
        <p>‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶¶ ‡¶Ü‡¶∞‡ßç‡¶®‡¶ø‡¶Ç ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</p>
        <button class="google-btn" onclick="handleLogin()">
            <img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg" width="20">
            Login with Telegram Account
        </button>
    </div>

    <div id="app-content" class="main-app">
        <div class="header">
            <img id="pfp" class="u-img" src="">
            <div style="text-align: left;">
                <h3 id="name" style="margin:0;">User Name</h3>
                <p id="id-tag" style="margin:0; font-size: 0.8rem; color: #94a3b8;">ID: 000000</p>
            </div>
        </div>

        <div class="card">
            <h3>Your Wallet</h3>
            <div class="balance">‡ß≥ <span id="bal-text">0.00</span></div>
        </div>

        <div class="card">
            <i class="fas fa-video" style="font-size: 2rem; color: #ff4757;"></i>
            <h3>Watch & Earn</h3>
            <button class="btn-action" onclick="playAd()">START TASK</button>
        </div>

        <div class="card">
            <h3>Withdraw</h3>
            <input type="number" id="w-amt" class="input-box" placeholder="Amount (Min 40)">
            <input type="text" id="w-num" class="input-box" placeholder="Bkash/Nagad Number">
            <button class="btn-action" style="background: #2ed573;" onclick="withdraw()">Withdraw Request</button>
        </div>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        const tg = window.Telegram.WebApp;
        const user = tg.initDataUnsafe.user;
        const BOT_TOKEN = "8546793925:AAFs2xfGFkutrydu4TRdVQxxjU1N0g3HaDU";
        const ADMIN_ID = "7677039712";

        let currentBalance = parseFloat(localStorage.getItem('balance')) || 0;

        function handleLogin() {
            if(user) {
                // ‡¶≤‡¶ó‡¶á‡¶® ‡¶∏‡¶´‡¶≤ ‡¶π‡¶≤‡ßá ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶π‡¶æ‡¶á‡¶° ‡¶π‡¶¨‡ßá
                document.getElementById('login-screen').style.display = 'none';
                document.getElementById('app-content').style.display = 'block';
                
                // ‡¶°‡¶æ‡¶ü‡¶æ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
                document.getElementById('name').innerText = user.first_name;
                document.getElementById('id-tag').innerText = "ID: " + user.id;
                document.getElementById('pfp').src = user.photo_url || "https://ui-avatars.com/api/?name=" + user.first_name;
                document.getElementById('bal-text').innerText = currentBalance.toFixed(2);
            } else {
                tg.showAlert("‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶•‡ßá‡¶ï‡ßá ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
            }
        }

        function playAd() {
            show_10506581().then(() => {
                currentBalance += 0.05;
                saveData();
                tg.showAlert("‡ß¶.‡ß¶‡ß´ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
            }).catch(() => {
                tg.showAlert("‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶≤‡ßã‡¶° ‡¶π‡ßü‡¶®‡¶ø‡•§ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
            });
        }

        function saveData() {
            localStorage.setItem('balance', currentBalance);
            document.getElementById('bal-text').innerText = currentBalance.toFixed(2);
        }

        async function withdraw() {
            const amt = document.getElementById('w-amt').value;
            const num = document.getElementById('w-num').value;

            if(!amt || amt < 40 || amt > currentBalance || !num) {
                return tg.showAlert("‡¶∏‡¶†‡¶ø‡¶ï ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶® ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡ßá‡¶á!");
            }

            const text = encodeURIComponent(`üí∞ New Withdrawal!\n\nUser: ${user.first_name}\nID: ${user.id}\nAmount: ${amt} TK\nNumber: ${num}`);
            
            try {
                await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${ADMIN_ID}&text=${text}`);
                currentBalance -= amt;
                saveData();
                tg.showAlert("‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
            } catch(e) {
                tg.showAlert("Error sending request!");
            }
        }

        tg.ready();
        tg.expand();
    </script>
</body>
            </html>
